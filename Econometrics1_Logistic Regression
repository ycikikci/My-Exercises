{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "9966b192-96fc-4024-98b1-cbdebc74d441",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import statsmodels.formula.api as smf\n",
    "import statsmodels.api as sm\n",
    "import numpy as np"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "34c4566c-14d5-4842-9cf8-380dafd9c1c1",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "firm_data = pd.read_excel('Firm_default.xlsx')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "6869acc9-9667-48f0-9c98-d9df0a9045fd",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "firm_data.columns =['Company','Default','CF_coverage','RoA','liquidity','asset_turnover']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "a9b4e1a2-f035-4e81-9362-3ded9d8e3003",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Company</th>\n",
       "      <th>Default</th>\n",
       "      <th>CF_coverage</th>\n",
       "      <th>RoA</th>\n",
       "      <th>liquidity</th>\n",
       "      <th>asset_turnover</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>-45.0</td>\n",
       "      <td>-41.0</td>\n",
       "      <td>109.0</td>\n",
       "      <td>222.222222</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "      <td>-56.0</td>\n",
       "      <td>-31.0</td>\n",
       "      <td>151.0</td>\n",
       "      <td>625.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>6.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>101.0</td>\n",
       "      <td>250.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>-7.0</td>\n",
       "      <td>-9.0</td>\n",
       "      <td>145.0</td>\n",
       "      <td>384.615385</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>5</td>\n",
       "      <td>1</td>\n",
       "      <td>-10.0</td>\n",
       "      <td>-9.0</td>\n",
       "      <td>156.0</td>\n",
       "      <td>149.253731</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>6</td>\n",
       "      <td>1</td>\n",
       "      <td>-14.0</td>\n",
       "      <td>-7.0</td>\n",
       "      <td>71.0</td>\n",
       "      <td>357.142857</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>7</td>\n",
       "      <td>1</td>\n",
       "      <td>4.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>150.0</td>\n",
       "      <td>140.845070</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>8</td>\n",
       "      <td>1</td>\n",
       "      <td>-6.0</td>\n",
       "      <td>-6.0</td>\n",
       "      <td>137.0</td>\n",
       "      <td>250.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>9</td>\n",
       "      <td>1</td>\n",
       "      <td>7.0</td>\n",
       "      <td>-1.0</td>\n",
       "      <td>137.0</td>\n",
       "      <td>294.117647</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>10</td>\n",
       "      <td>1</td>\n",
       "      <td>-13.0</td>\n",
       "      <td>-14.0</td>\n",
       "      <td>142.0</td>\n",
       "      <td>227.272727</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>11</td>\n",
       "      <td>1</td>\n",
       "      <td>-22.0</td>\n",
       "      <td>-30.0</td>\n",
       "      <td>33.0</td>\n",
       "      <td>555.555556</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>12</td>\n",
       "      <td>1</td>\n",
       "      <td>7.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>131.0</td>\n",
       "      <td>400.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>13</td>\n",
       "      <td>1</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>215.0</td>\n",
       "      <td>142.857143</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>14</td>\n",
       "      <td>1</td>\n",
       "      <td>-28.0</td>\n",
       "      <td>-23.0</td>\n",
       "      <td>119.0</td>\n",
       "      <td>151.515152</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>15</td>\n",
       "      <td>1</td>\n",
       "      <td>15.0</td>\n",
       "      <td>5.0</td>\n",
       "      <td>188.0</td>\n",
       "      <td>370.370370</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>16</td>\n",
       "      <td>1</td>\n",
       "      <td>37.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>199.0</td>\n",
       "      <td>263.157895</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "      <td>-8.0</td>\n",
       "      <td>-8.0</td>\n",
       "      <td>151.0</td>\n",
       "      <td>238.095238</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>18</td>\n",
       "      <td>1</td>\n",
       "      <td>5.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>168.0</td>\n",
       "      <td>105.263158</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>19</td>\n",
       "      <td>1</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>126.0</td>\n",
       "      <td>166.666667</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>20</td>\n",
       "      <td>1</td>\n",
       "      <td>12.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>114.0</td>\n",
       "      <td>588.235294</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>21</td>\n",
       "      <td>1</td>\n",
       "      <td>-28.0</td>\n",
       "      <td>-27.0</td>\n",
       "      <td>127.0</td>\n",
       "      <td>196.078431</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>22</td>\n",
       "      <td>0</td>\n",
       "      <td>51.0</td>\n",
       "      <td>10.0</td>\n",
       "      <td>249.0</td>\n",
       "      <td>185.185185</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>23</td>\n",
       "      <td>0</td>\n",
       "      <td>8.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>201.0</td>\n",
       "      <td>188.679245</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>24</td>\n",
       "      <td>0</td>\n",
       "      <td>38.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>327.0</td>\n",
       "      <td>285.714286</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>25</td>\n",
       "      <td>0</td>\n",
       "      <td>19.0</td>\n",
       "      <td>5.0</td>\n",
       "      <td>225.0</td>\n",
       "      <td>303.030303</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>26</td>\n",
       "      <td>0</td>\n",
       "      <td>32.0</td>\n",
       "      <td>7.0</td>\n",
       "      <td>424.0</td>\n",
       "      <td>158.730159</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>27</td>\n",
       "      <td>0</td>\n",
       "      <td>31.0</td>\n",
       "      <td>5.0</td>\n",
       "      <td>445.0</td>\n",
       "      <td>144.927536</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>28</td>\n",
       "      <td>0</td>\n",
       "      <td>12.0</td>\n",
       "      <td>5.0</td>\n",
       "      <td>252.0</td>\n",
       "      <td>144.927536</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>29</td>\n",
       "      <td>0</td>\n",
       "      <td>-2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>205.0</td>\n",
       "      <td>285.714286</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>30</td>\n",
       "      <td>0</td>\n",
       "      <td>22.0</td>\n",
       "      <td>8.0</td>\n",
       "      <td>235.0</td>\n",
       "      <td>250.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>31</td>\n",
       "      <td>0</td>\n",
       "      <td>17.0</td>\n",
       "      <td>7.0</td>\n",
       "      <td>180.0</td>\n",
       "      <td>192.307692</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>32</td>\n",
       "      <td>0</td>\n",
       "      <td>15.0</td>\n",
       "      <td>5.0</td>\n",
       "      <td>217.0</td>\n",
       "      <td>181.818182</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>33</td>\n",
       "      <td>0</td>\n",
       "      <td>-10.0</td>\n",
       "      <td>-1.0</td>\n",
       "      <td>250.0</td>\n",
       "      <td>172.413793</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>34</td>\n",
       "      <td>0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>-3.0</td>\n",
       "      <td>46.0</td>\n",
       "      <td>384.615385</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34</th>\n",
       "      <td>35</td>\n",
       "      <td>0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>7.0</td>\n",
       "      <td>261.0</td>\n",
       "      <td>192.307692</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>36</td>\n",
       "      <td>0</td>\n",
       "      <td>15.0</td>\n",
       "      <td>6.0</td>\n",
       "      <td>223.0</td>\n",
       "      <td>178.571429</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>36</th>\n",
       "      <td>37</td>\n",
       "      <td>0</td>\n",
       "      <td>16.0</td>\n",
       "      <td>5.0</td>\n",
       "      <td>231.0</td>\n",
       "      <td>500.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>37</th>\n",
       "      <td>38</td>\n",
       "      <td>0</td>\n",
       "      <td>29.0</td>\n",
       "      <td>6.0</td>\n",
       "      <td>184.0</td>\n",
       "      <td>263.157895</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>38</th>\n",
       "      <td>39</td>\n",
       "      <td>0</td>\n",
       "      <td>54.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>233.0</td>\n",
       "      <td>208.333333</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>39</th>\n",
       "      <td>40</td>\n",
       "      <td>0</td>\n",
       "      <td>-33.0</td>\n",
       "      <td>-9.0</td>\n",
       "      <td>301.0</td>\n",
       "      <td>212.765957</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>40</th>\n",
       "      <td>41</td>\n",
       "      <td>0</td>\n",
       "      <td>48.0</td>\n",
       "      <td>9.0</td>\n",
       "      <td>124.0</td>\n",
       "      <td>555.555556</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>41</th>\n",
       "      <td>42</td>\n",
       "      <td>0</td>\n",
       "      <td>56.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>429.0</td>\n",
       "      <td>222.222222</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>42</th>\n",
       "      <td>43</td>\n",
       "      <td>0</td>\n",
       "      <td>20.0</td>\n",
       "      <td>8.0</td>\n",
       "      <td>199.0</td>\n",
       "      <td>333.333333</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>43</th>\n",
       "      <td>44</td>\n",
       "      <td>0</td>\n",
       "      <td>47.0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>292.0</td>\n",
       "      <td>222.222222</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>44</th>\n",
       "      <td>45</td>\n",
       "      <td>0</td>\n",
       "      <td>17.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>245.0</td>\n",
       "      <td>714.285714</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>45</th>\n",
       "      <td>46</td>\n",
       "      <td>0</td>\n",
       "      <td>58.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>506.0</td>\n",
       "      <td>769.230769</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    Company  Default  CF_coverage   RoA  liquidity  asset_turnover\n",
       "0         1        1        -45.0 -41.0      109.0      222.222222\n",
       "1         2        1        -56.0 -31.0      151.0      625.000000\n",
       "2         3        1          6.0   2.0      101.0      250.000000\n",
       "3         4        1         -7.0  -9.0      145.0      384.615385\n",
       "4         5        1        -10.0  -9.0      156.0      149.253731\n",
       "5         6        1        -14.0  -7.0       71.0      357.142857\n",
       "6         7        1          4.0   1.0      150.0      140.845070\n",
       "7         8        1         -6.0  -6.0      137.0      250.000000\n",
       "8         9        1          7.0  -1.0      137.0      294.117647\n",
       "9        10        1        -13.0 -14.0      142.0      227.272727\n",
       "10       11        1        -22.0 -30.0       33.0      555.555556\n",
       "11       12        1          7.0   2.0      131.0      400.000000\n",
       "12       13        1          1.0   0.0      215.0      142.857143\n",
       "13       14        1        -28.0 -23.0      119.0      151.515152\n",
       "14       15        1         15.0   5.0      188.0      370.370370\n",
       "15       16        1         37.0  11.0      199.0      263.157895\n",
       "16       17        1         -8.0  -8.0      151.0      238.095238\n",
       "17       18        1          5.0   3.0      168.0      105.263158\n",
       "18       19        1          1.0   0.0      126.0      166.666667\n",
       "19       20        1         12.0  11.0      114.0      588.235294\n",
       "20       21        1        -28.0 -27.0      127.0      196.078431\n",
       "21       22        0         51.0  10.0      249.0      185.185185\n",
       "22       23        0          8.0   2.0      201.0      188.679245\n",
       "23       24        0         38.0  11.0      327.0      285.714286\n",
       "24       25        0         19.0   5.0      225.0      303.030303\n",
       "25       26        0         32.0   7.0      424.0      158.730159\n",
       "26       27        0         31.0   5.0      445.0      144.927536\n",
       "27       28        0         12.0   5.0      252.0      144.927536\n",
       "28       29        0         -2.0   2.0      205.0      285.714286\n",
       "29       30        0         22.0   8.0      235.0      250.000000\n",
       "30       31        0         17.0   7.0      180.0      192.307692\n",
       "31       32        0         15.0   5.0      217.0      181.818182\n",
       "32       33        0        -10.0  -1.0      250.0      172.413793\n",
       "33       34        0         14.0  -3.0       46.0      384.615385\n",
       "34       35        0         14.0   7.0      261.0      192.307692\n",
       "35       36        0         15.0   6.0      223.0      178.571429\n",
       "36       37        0         16.0   5.0      231.0      500.000000\n",
       "37       38        0         29.0   6.0      184.0      263.157895\n",
       "38       39        0         54.0  11.0      233.0      208.333333\n",
       "39       40        0        -33.0  -9.0      301.0      212.765957\n",
       "40       41        0         48.0   9.0      124.0      555.555556\n",
       "41       42        0         56.0  11.0      429.0      222.222222\n",
       "42       43        0         20.0   8.0      199.0      333.333333\n",
       "43       44        0         47.0  14.0      292.0      222.222222\n",
       "44       45        0         17.0   4.0      245.0      714.285714\n",
       "45       46        0         58.0   4.0      506.0      769.230769"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "firm_data=firm_data.dropna()\n",
    "firm_data"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "40903828-8f61-4922-a55f-82b70d1cd11b",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Company</th>\n",
       "      <th>Default</th>\n",
       "      <th>CF_coverage</th>\n",
       "      <th>RoA</th>\n",
       "      <th>liquidity</th>\n",
       "      <th>asset_turnover</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>46.000000</td>\n",
       "      <td>46.000000</td>\n",
       "      <td>46.000000</td>\n",
       "      <td>46.000000</td>\n",
       "      <td>46.000000</td>\n",
       "      <td>46.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>23.500000</td>\n",
       "      <td>0.456522</td>\n",
       "      <td>9.695652</td>\n",
       "      <td>-0.695652</td>\n",
       "      <td>203.347826</td>\n",
       "      <td>289.745962</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>13.422618</td>\n",
       "      <td>0.503610</td>\n",
       "      <td>26.051120</td>\n",
       "      <td>12.395106</td>\n",
       "      <td>100.652806</td>\n",
       "      <td>160.346884</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>1.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-56.000000</td>\n",
       "      <td>-41.000000</td>\n",
       "      <td>33.000000</td>\n",
       "      <td>105.263158</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>12.250000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-6.750000</td>\n",
       "      <td>-5.250000</td>\n",
       "      <td>137.000000</td>\n",
       "      <td>182.659933</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>23.500000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>12.000000</td>\n",
       "      <td>3.500000</td>\n",
       "      <td>193.500000</td>\n",
       "      <td>232.683983</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>34.750000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>21.500000</td>\n",
       "      <td>7.000000</td>\n",
       "      <td>242.500000</td>\n",
       "      <td>351.190476</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>46.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>58.000000</td>\n",
       "      <td>14.000000</td>\n",
       "      <td>506.000000</td>\n",
       "      <td>769.230769</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "         Company    Default  CF_coverage        RoA   liquidity  \\\n",
       "count  46.000000  46.000000    46.000000  46.000000   46.000000   \n",
       "mean   23.500000   0.456522     9.695652  -0.695652  203.347826   \n",
       "std    13.422618   0.503610    26.051120  12.395106  100.652806   \n",
       "min     1.000000   0.000000   -56.000000 -41.000000   33.000000   \n",
       "25%    12.250000   0.000000    -6.750000  -5.250000  137.000000   \n",
       "50%    23.500000   0.000000    12.000000   3.500000  193.500000   \n",
       "75%    34.750000   1.000000    21.500000   7.000000  242.500000   \n",
       "max    46.000000   1.000000    58.000000  14.000000  506.000000   \n",
       "\n",
       "       asset_turnover  \n",
       "count       46.000000  \n",
       "mean       289.745962  \n",
       "std        160.346884  \n",
       "min        105.263158  \n",
       "25%        182.659933  \n",
       "50%        232.683983  \n",
       "75%        351.190476  \n",
       "max        769.230769  "
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "firm_data.describe()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "fa71cb44-6cff-428b-a5f1-da361f6a4548",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "RangeIndex: 46 entries, 0 to 45\n",
      "Data columns (total 6 columns):\n",
      " #   Column          Non-Null Count  Dtype  \n",
      "---  ------          --------------  -----  \n",
      " 0   Company         46 non-null     int64  \n",
      " 1   Default         46 non-null     int64  \n",
      " 2   CF_coverage     46 non-null     float64\n",
      " 3   RoA             46 non-null     float64\n",
      " 4   liquidity       46 non-null     float64\n",
      " 5   asset_turnover  46 non-null     float64\n",
      "dtypes: float64(4), int64(2)\n",
      "memory usage: 2.3 KB\n"
     ]
    }
   ],
   "source": [
    "firm_data.info()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "3485b1d8-e83c-4260-bc8e-d10015dd662a",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<statsmodels.genmod.generalized_linear_model.GLMResultsWrapper object at 0x000001F4C72B2A90>\n"
     ]
    }
   ],
   "source": [
    "# a) Run a logistic regression using asset_turnover as the only independent variable. Write out the fitted regression equation\n",
    "\n",
    "model=smf.glm(\"Default ~ asset_turnover\", data=firm_data,family=sm.families.Binomial()).fit()\n",
    "print(model)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "8d1540ce-66ae-4a29-b37f-3d352560e792",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>Generalized Linear Model Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>        <td>Default</td>     <th>  No. Observations:  </th>  <td>    46</td>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                  <td>GLM</td>       <th>  Df Residuals:      </th>  <td>    44</td>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model Family:</th>        <td>Binomial</td>     <th>  Df Model:          </th>  <td>     1</td>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Link Function:</th>         <td>Logit</td>      <th>  Scale:             </th> <td>  1.0000</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>                <td>IRLS</td>       <th>  Log-Likelihood:    </th> <td> -31.711</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>            <td>Sun, 19 Nov 2023</td> <th>  Deviance:          </th> <td>  63.421</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                <td>15:23:19</td>     <th>  Pearson chi2:      </th>  <td>  46.0</td>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Iterations:</th>          <td>4</td>        <th>  Pseudo R-squ. (CS):</th> <td>3.103e-06</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>                     </th>     <td> </td>    \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "         <td></td>           <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th>      <td>   -0.1679</td> <td>    0.617</td> <td>   -0.272</td> <td> 0.785</td> <td>   -1.376</td> <td>    1.040</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>asset_turnover</th> <td> -2.23e-05</td> <td>    0.002</td> <td>   -0.012</td> <td> 0.990</td> <td>   -0.004</td> <td>    0.004</td>\n",
       "</tr>\n",
       "</table>"
      ],
      "text/latex": [
       "\\begin{center}\n",
       "\\begin{tabular}{lclc}\n",
       "\\toprule\n",
       "\\textbf{Dep. Variable:}   &     Default      & \\textbf{  No. Observations:  } &       46    \\\\\n",
       "\\textbf{Model:}           &       GLM        & \\textbf{  Df Residuals:      } &       44    \\\\\n",
       "\\textbf{Model Family:}    &     Binomial     & \\textbf{  Df Model:          } &        1    \\\\\n",
       "\\textbf{Link Function:}   &      Logit       & \\textbf{  Scale:             } &    1.0000   \\\\\n",
       "\\textbf{Method:}          &       IRLS       & \\textbf{  Log-Likelihood:    } &   -31.711   \\\\\n",
       "\\textbf{Date:}            & Sun, 19 Nov 2023 & \\textbf{  Deviance:          } &    63.421   \\\\\n",
       "\\textbf{Time:}            &     15:23:19     & \\textbf{  Pearson chi2:      } &     46.0    \\\\\n",
       "\\textbf{No. Iterations:}  &        4         & \\textbf{  Pseudo R-squ. (CS):} & 3.103e-06   \\\\\n",
       "\\textbf{Covariance Type:} &    nonrobust     & \\textbf{                     } &             \\\\\n",
       "\\bottomrule\n",
       "\\end{tabular}\n",
       "\\begin{tabular}{lcccccc}\n",
       "                         & \\textbf{coef} & \\textbf{std err} & \\textbf{z} & \\textbf{P$> |$z$|$} & \\textbf{[0.025} & \\textbf{0.975]}  \\\\\n",
       "\\midrule\n",
       "\\textbf{Intercept}       &      -0.1679  &        0.617     &    -0.272  &         0.785        &       -1.376    &        1.040     \\\\\n",
       "\\textbf{asset\\_turnover} &    -2.23e-05  &        0.002     &    -0.012  &         0.990        &       -0.004    &        0.004     \\\\\n",
       "\\bottomrule\n",
       "\\end{tabular}\n",
       "%\\caption{Generalized Linear Model Regression Results}\n",
       "\\end{center}"
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                 Generalized Linear Model Regression Results                  \n",
       "==============================================================================\n",
       "Dep. Variable:                Default   No. Observations:                   46\n",
       "Model:                            GLM   Df Residuals:                       44\n",
       "Model Family:                Binomial   Df Model:                            1\n",
       "Link Function:                  Logit   Scale:                          1.0000\n",
       "Method:                          IRLS   Log-Likelihood:                -31.711\n",
       "Date:                Sun, 19 Nov 2023   Deviance:                       63.421\n",
       "Time:                        15:23:19   Pearson chi2:                     46.0\n",
       "No. Iterations:                     4   Pseudo R-squ. (CS):          3.103e-06\n",
       "Covariance Type:            nonrobust                                         \n",
       "==================================================================================\n",
       "                     coef    std err          z      P>|z|      [0.025      0.975]\n",
       "----------------------------------------------------------------------------------\n",
       "Intercept         -0.1679      0.617     -0.272      0.785      -1.376       1.040\n",
       "asset_turnover  -2.23e-05      0.002     -0.012      0.990      -0.004       0.004\n",
       "==================================================================================\n",
       "\"\"\""
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "model.summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "2bfed688-300d-4699-bf5c-d8f835a48e97",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Intercept        -0.167892\n",
      "asset_turnover   -0.000022\n",
      "dtype: float64\n"
     ]
    }
   ],
   "source": [
    "print(model.params)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "9c68e60d-3168-45f0-bdf3-d4a1b7d9a94a",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The fitted regression model is -0.168 + -2.2e-05*asset_turnover\n"
     ]
    }
   ],
   "source": [
    "fz = 'The fitted regression model is ' + str(round(model.params[0],3)) + ' + ' + str(round(model.params[1],6)) +'*asset_turnover'\n",
    "print(fz)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "2dbbf218-6ef5-4ae0-bbf9-1174701f32b7",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Odds ratio is 0.9999776981994056\n",
      "%95 confidence interval for the coefficient of asset_turnover is between -0.0039423 and 0.0038977\n"
     ]
    }
   ],
   "source": [
    "# b) Comment on the economic significance of your independent variable even if the coefficient of the variable is statistically insignificant. [Hint: You may need to do some calculations here.]\n",
    "\n",
    "# Odds ratio is the exponential of Î²\n",
    "# An increase of 1 in asset turnover decreases the odds ratio by %2.23e-05\n",
    "# P value is 0.990. It is greater than 0.05 so it is insignificant.\n",
    "# The coefficient of asset_turnover is not statistically significant at 5% significance level.\n",
    "\n",
    "upper_bound=-2.23e-05+(1.96*0.002)\n",
    "lower_bound=-2.23e-05-(1.96*0.002)\n",
    "\n",
    "odds_ratios = np.exp(model.params[1])\n",
    "print('Odds ratio is ' + str(odds_ratios))\n",
    "print('%95 confidence interval for the coefficient of asset_turnover is between '+ str(lower_bound) + ' and ' + str(upper_bound))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "dca26243-44c0-47d2-a365-a924ef91a183",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<statsmodels.genmod.generalized_linear_model.GLMResultsWrapper object at 0x000001F4C6949690>\n"
     ]
    }
   ],
   "source": [
    "# c) Run a logistic regression with the following independent variables: \n",
    "# CF_coverage, RoA, liquidity, asset_turnover.\n",
    "\n",
    "model2=smf.glm(\"Default ~ CF_coverage + RoA + liquidity + asset_turnover\", data=firm_data, family=sm.families.Binomial()).fit()\n",
    "print(model2)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "e0427c1a-9264-432d-b6c9-8abb29383a0f",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>Generalized Linear Model Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>        <td>Default</td>     <th>  No. Observations:  </th>  <td>    46</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                  <td>GLM</td>       <th>  Df Residuals:      </th>  <td>    41</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model Family:</th>        <td>Binomial</td>     <th>  Df Model:          </th>  <td>     4</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Link Function:</th>         <td>Logit</td>      <th>  Scale:             </th> <td>  1.0000</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>                <td>IRLS</td>       <th>  Log-Likelihood:    </th> <td> -13.981</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>            <td>Sun, 19 Nov 2023</td> <th>  Deviance:          </th> <td>  27.962</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                <td>15:23:23</td>     <th>  Pearson chi2:      </th>  <td>  57.4</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Iterations:</th>          <td>7</td>        <th>  Pseudo R-squ. (CS):</th>  <td>0.5374</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>                     </th>     <td> </td>   \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "         <td></td>           <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th>      <td>    7.5999</td> <td>    3.041</td> <td>    2.499</td> <td> 0.012</td> <td>    1.640</td> <td>   13.559</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>CF_coverage</th>    <td>   -0.0758</td> <td>    0.059</td> <td>   -1.280</td> <td> 0.201</td> <td>   -0.192</td> <td>    0.040</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>RoA</th>            <td>    0.0467</td> <td>    0.134</td> <td>    0.350</td> <td> 0.726</td> <td>   -0.215</td> <td>    0.308</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>liquidity</th>      <td>   -0.0345</td> <td>    0.012</td> <td>   -2.781</td> <td> 0.005</td> <td>   -0.059</td> <td>   -0.010</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>asset_turnover</th> <td>   -0.0032</td> <td>    0.004</td> <td>   -0.755</td> <td> 0.450</td> <td>   -0.012</td> <td>    0.005</td>\n",
       "</tr>\n",
       "</table>"
      ],
      "text/latex": [
       "\\begin{center}\n",
       "\\begin{tabular}{lclc}\n",
       "\\toprule\n",
       "\\textbf{Dep. Variable:}   &     Default      & \\textbf{  No. Observations:  } &       46    \\\\\n",
       "\\textbf{Model:}           &       GLM        & \\textbf{  Df Residuals:      } &       41    \\\\\n",
       "\\textbf{Model Family:}    &     Binomial     & \\textbf{  Df Model:          } &        4    \\\\\n",
       "\\textbf{Link Function:}   &      Logit       & \\textbf{  Scale:             } &    1.0000   \\\\\n",
       "\\textbf{Method:}          &       IRLS       & \\textbf{  Log-Likelihood:    } &   -13.981   \\\\\n",
       "\\textbf{Date:}            & Sun, 19 Nov 2023 & \\textbf{  Deviance:          } &    27.962   \\\\\n",
       "\\textbf{Time:}            &     15:23:23     & \\textbf{  Pearson chi2:      } &     57.4    \\\\\n",
       "\\textbf{No. Iterations:}  &        7         & \\textbf{  Pseudo R-squ. (CS):} &   0.5374    \\\\\n",
       "\\textbf{Covariance Type:} &    nonrobust     & \\textbf{                     } &             \\\\\n",
       "\\bottomrule\n",
       "\\end{tabular}\n",
       "\\begin{tabular}{lcccccc}\n",
       "                         & \\textbf{coef} & \\textbf{std err} & \\textbf{z} & \\textbf{P$> |$z$|$} & \\textbf{[0.025} & \\textbf{0.975]}  \\\\\n",
       "\\midrule\n",
       "\\textbf{Intercept}       &       7.5999  &        3.041     &     2.499  &         0.012        &        1.640    &       13.559     \\\\\n",
       "\\textbf{CF\\_coverage}    &      -0.0758  &        0.059     &    -1.280  &         0.201        &       -0.192    &        0.040     \\\\\n",
       "\\textbf{RoA}             &       0.0467  &        0.134     &     0.350  &         0.726        &       -0.215    &        0.308     \\\\\n",
       "\\textbf{liquidity}       &      -0.0345  &        0.012     &    -2.781  &         0.005        &       -0.059    &       -0.010     \\\\\n",
       "\\textbf{asset\\_turnover} &      -0.0032  &        0.004     &    -0.755  &         0.450        &       -0.012    &        0.005     \\\\\n",
       "\\bottomrule\n",
       "\\end{tabular}\n",
       "%\\caption{Generalized Linear Model Regression Results}\n",
       "\\end{center}"
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                 Generalized Linear Model Regression Results                  \n",
       "==============================================================================\n",
       "Dep. Variable:                Default   No. Observations:                   46\n",
       "Model:                            GLM   Df Residuals:                       41\n",
       "Model Family:                Binomial   Df Model:                            4\n",
       "Link Function:                  Logit   Scale:                          1.0000\n",
       "Method:                          IRLS   Log-Likelihood:                -13.981\n",
       "Date:                Sun, 19 Nov 2023   Deviance:                       27.962\n",
       "Time:                        15:23:23   Pearson chi2:                     57.4\n",
       "No. Iterations:                     7   Pseudo R-squ. (CS):             0.5374\n",
       "Covariance Type:            nonrobust                                         \n",
       "==================================================================================\n",
       "                     coef    std err          z      P>|z|      [0.025      0.975]\n",
       "----------------------------------------------------------------------------------\n",
       "Intercept          7.5999      3.041      2.499      0.012       1.640      13.559\n",
       "CF_coverage       -0.0758      0.059     -1.280      0.201      -0.192       0.040\n",
       "RoA                0.0467      0.134      0.350      0.726      -0.215       0.308\n",
       "liquidity         -0.0345      0.012     -2.781      0.005      -0.059      -0.010\n",
       "asset_turnover    -0.0032      0.004     -0.755      0.450      -0.012       0.005\n",
       "==================================================================================\n",
       "\"\"\""
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "model2.summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "id": "adf70e41-a980-453a-8703-fa66d0fb44ec",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Intercept         7.599872\n",
      "CF_coverage      -0.075824\n",
      "RoA               0.046747\n",
      "liquidity        -0.034478\n",
      "asset_turnover   -0.003230\n",
      "dtype: float64\n"
     ]
    }
   ],
   "source": [
    "print(model2.params)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "id": "7636c133-7e72-400c-9dd5-2908f57e2f98",
   "metadata": {
    "tags": []
   },
   "outputs": [],
   "source": [
    "#Given the regression result what is the probability of default for a firm with the following characteristics:\n",
    "#CF_coverage is 12 , RoA is 7 , liquidity is 100 , asset_turnover is 400."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "id": "218f0d33-fc7d-4c5d-b04b-307e883cbbb3",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0.9069943744209957"
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#CF_coverage is 12, RoA is 7 , liquidity is 100 , asset_turnover is 400.\n",
    "1/(1 + np.exp(-model2.params[0]-model2.params[1]*12-model2.params[2]*7-model2.params[3]*100-model2.params[4]*400))"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
